"use strict";function sabShowData(){document.querySelector(".bottom-bar-container .sabnzbd-info").innerHTML="",document.querySelector("#sabnzbd .queue").innerHTML="",document.querySelector("#sabnzbd .history").innerHTML="",checkError("sabnzbd","SabnzbdHistory_error"),checkError("sabnzbd","SabnzbdQueue_error"),document.querySelector(".bottom-bar-container .sabnzbd-info").innerHTML=serviceData.SAB.downloadStatus,document.querySelector("#sabnzbd .queue").innerHTML=serviceData.SAB.queue.HTML,document.querySelector("#sabnzbd .history").innerHTML=serviceData.SAB.history.HTML}function sabRemove(a){elem=a.target;var b,c=(elem.getAttribute("class"),elem.getAttribute("data-id")),d=serviceData.SAB.apiUrl;b=elem.classList.contains("sabh-remove-icon")?d+"&mode=history&name=delete&value="+c+"&del_files=true":d+"&mode=queue&name=delete&value="+c,ajax("GET",b).then(function(a){if(a=a.trim(),"ok"==a){var b=elem.closest(".sab-item-container"),c=b.closest(".core-collapse");c.parentNode.removeChild(c),b.parentNode.removeChild(b),document.querySelector(".queue .core-item")||(document.querySelector(".queue").innerHTML='<div class="core-item without-hover">No items in queue at this moment.</div>'),document.querySelector(".history .core-item")||(document.querySelector(".history").innerHTML='<div class="core-item without-hover">No items in history at this moment.</div>'),localStorage.setItem("SabnzbdHistoryHTML",document.querySelector(".history").innerHTML),localStorage.setItem("SabnzbdQueueHTML",document.querySelector(".queue").innerHTML)}else replaceContent(elem,"").then(function(){elem.classList.remove("remove-icon"),elem.classList.add("error-icon"),elem.setAttribute("title",a),replaceContent(elem,"")})},function(){replaceContent(elem,"").then(function(){elem.classList.remove("remove-icon"),elem.classList.add("error-icon"),elem.setAttribute("title",data),replaceContent(elem,"")})})}function sabCheckScroll(a){var b=a.target,c=parseFloat(document.querySelector("#sabnzbd .sab-item-container").length)+parseFloat(serviceData.SAB.history.length);b.scrollHeight-b.scrollTop==b.offsetHeight&&(document.querySelector("#sabnzbd .history .loading-bar")||document.querySelector("#sabnzbd .history").insertAdjacentHTML("beforeend",'<div class="core-item without-hover loading-bar">'+serviceData.spinner+"</div>"),chrome.runtime.getBackgroundPage(function(a){a.getSabnzbdHistory(c)}))}serviceDataRefreshDone.then(function(){serviceData.SAB.status&&($("html").on("click",".sabh-remove-icon, .sabq-remove-icon",sabRemove),document.querySelector("#sabnzbd .panel-content").addEventListener("scroll",sabCheckScroll,!0),document.querySelector("#sabnzbd .panel-header .panel-header-foreground .bottom a").setAttribute("href",serviceData.SAB.url))});