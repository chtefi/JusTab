function GmailShowData(){$(".mail-unread").empty(),$(".mail-read").empty();var a=serviceData.GM.error;"true"==a&&$("#gmail .error").slideDown("slow"),"false"==a&&$("#gmail .error").slideUp("slow"),serviceData.GM.UnreadHTML&&serviceData.GM.ReadHTML&&($(".mail-unread").html(serviceData.GM.UnreadHTML),$(".mail-read").html(serviceData.GM.ReadHTML),$(".mail-unread .core-item").length<1&&$(".mail-unread").html('<h2>Unread</h2><div class="core-item without-hover">There are no unread e-mails at the moment.</div>'),$(".mail-read .core-item").length<1&&$(".mail-read").html('<h2>Read</h2><div class="core-item without-hover">There are no read e-mails at the moment.</div>'))}function gmailCheckScroll(a){var b=$(a.currentTarget),c=(localStorage.getItem("Gmail_page"),$("#gmail .gm-message").length);b[0].scrollHeight-b[0].scrollTop==b.outerHeight()&&(0===$("#gmail .mail-read .loading-bar").length&&$("#gmail .mail-read").append('<div class="core-item without-hover loading-bar">'+serviceData.spinner+"</div>"),chrome.runtime.getBackgroundPage(function(a){a.getGmailData(c+25)}))}$.when(serviceDataRefreshDone).done(function(){serviceData.GM.status&&($(".refresh-gmail").click(function(){$("#gmail .error:visible").slideUp(400),$(".refresh-gmail").fadeOut(400,function(){$(this).html(serviceData.spinner),$(this).fadeIn(400,function(){chrome.runtime.getBackgroundPage(function(a){a.getGmailData(25,function(){$(".refresh-gmail").fadeOut(400,function(){$(this).html('<img src="img/icons/refresh.svg" alt="Refresh Gmail" draggable=false>'),$(this).fadeIn(400)})})})})})}),$("#gmail .panel-content").bind("scroll",gmailCheckScroll))});