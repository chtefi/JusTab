function getSabnzbdHistory(a,b){a||(a=serviceData.SABH.length);var c=serviceData.SABH.apiUrl,d="&mode=history&limit="+a,e="&output=json";$.ajax({url:c+d+e}).done(function(a){localStorage.setItem("SabnzbdHistory",JSON.stringify(a)),serviceData.SABH.JSON=a,localStorage.setItem("SabnzbdHistory_error",!1),serviceData.SABH.error=!1,sabhHTML()}).fail(function(a,b,c){console.log(a,b,c),localStorage.setItem("SabnzbdHistory_error",!0),serviceData.SABH.error=!0}).always(function(){b&&b()})}function getSabnzbdQueue(a){var b=serviceData.SABQ.apiUrl,c="&mode=queue",d="&output=json";$.ajax({url:b+c+d}).done(function(a){localStorage.setItem("SabnzbdQueue",JSON.stringify(a)),serviceData.SABQ.JSON=a,localStorage.setItem("SabnzbdQueue_error",!1),serviceData.SABQ.error=!1,sabqHTML()}).fail(function(a,b,c){console.log(a,b,c),localStorage.setItem("SabnzbdQueue_error",!0),serviceData.SABQ.error=!0}).always(function(){a&&a()})}function sabqHTML(){var a="",b="<h2>Queue</h2>";if(serviceData.SABQ.JSON){var c=serviceData.SABQ.JSON,d="",e="";"0.00"!=c.queue.mb&&"0.00"!=c.queue.mbleft&&(d=" - "+c.queue.sizeleft+"/"+c.queue.size),"0:00:00"!=c.queue.timeleft&&(e=c.queue.timeleft),$.each(c.queue.slots,function(a,c){b+='<div class="core-item sab-item-container"><div class="sab-item-name">'+c.filename+'</div><div class="sab-item-status">'+c.status+" - "+c.percentage+'%</div><div class="core-item-icon"><div class="expand-more-icon"></div></div></div><div class="sabq-collapse core-collapse"><div class="sabq-collapse-buttons"><div class="icon-button remove-icon sabq-remove-icon waves-effect" data-id='+c.nzo_id+"></div></div></div>"}),a+='<div class="core-item without-hover sab-status-container"><div class="sab-status">'+c.queue.status+d+'</div><div class="sab-time">'+e+"</div></div>",c.queue.slots.length<1&&(b+='<div class="core-item without-hover">No items in queue at this moment.</div>'),localStorage.setItem("SabnzbdQueueHTML",b),serviceData.SABQ.HTML=b,localStorage.setItem("SabnzbdStatusHTML",a),serviceData.SABQ.downloadStatus=a}}function sabhHTML(){if(serviceData.SABH.JSON){var a=serviceData.SABH.JSON,b="<h2>History</h2>";$.each(a.history.slots,function(a,c){console.log(c),b+='<div class="core-item sab-item-container"><div class="sab-item-name">'+c.name+'</div><div class="core-item-icon"><div class="expand-more-icon"></div></div></div><div class="sabh-collapse core-collapse">',b+=""===c.fail_message?c.status:c.fail_message,b+='<div class="sabh-collapse-buttons"><div class="icon-button remove-icon sabh-remove-icon waves-effect" data-id='+c.nzo_id+"></div></div></div>"}),a.history.slots.length<1&&(b+='<div class="core-item without-hover">No items in history at this moment.</div>'),localStorage.setItem("SabnzbdHistoryHTML",b),serviceData.SABH.HTML=b}}