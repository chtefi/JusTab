"use strict";function getSabnzbdHistory(a,b){a||(a=serviceData.SAB.history.length);var c=serviceData.SAB.apiUrl,d="&mode=history&limit="+a,e="&output=json";ajax("GET",c+d+e).then(function(a){localStorage.setItem("SabnzbdHistory",JSON.stringify(a)),serviceData.SAB.history.JSON=a,localStorage.setItem("Sabnzbd_error",!1),serviceData.SAB.history.error=!1,sabhHTML(),b&&b()},function(){localStorage.setItem("Sabnzbd_error",!0),serviceData.SAB.history.error=!0,b&&b()})}function getSabnzbdQueue(a){var b=serviceData.SAB.apiUrl,c="&mode=queue",d="&output=json";ajax("GET",b+c+d).then(function(b){localStorage.setItem("SabnzbdQueue",JSON.stringify(b)),serviceData.SAB.queue.JSON=b,localStorage.setItem("Sabnzbd_error",!1),serviceData.SAB.queue.error=!1,sabqHTML(),a&&a()},function(){localStorage.setItem("Sabnzbd_error",!0),serviceData.SAB.queue.error=!0,a&&a()})}function sabqHTML(){var a="",b="<h2>Queue</h2>";if(serviceData.SAB.queue.JSON){var c=serviceData.SAB.queue.JSON,d="",e="";"0.00"!=c.queue.mb&&"0.00"!=c.queue.mbleft&&(d=" - "+c.queue.sizeleft+"/"+c.queue.size),"0:00:00"!=c.queue.timeleft&&(e=c.queue.timeleft),c.queue.slots.forEach(function(a){b+='<div class="core-item sab-item-container"><div class="sab-item-name">'+htmlEncode(a.filename)+'</div><div class="sab-item-status">'+htmlEncode(a.status+" - "+a.percentage+"%")+'</div><div class="core-item-icon"></div></div><div class="sabq-collapse core-collapse"><div class="sabq-collapse-buttons"><div class="icon-button remove-icon sabq-remove-icon waves-effect" data-id='+a.nzo_id+"></div></div></div>"}),a+='<div class="core-item without-hover sab-status-container"><div class="sab-status">'+htmlEncode(c.queue.status+d)+'</div><div class="sab-time">'+htmlEncode(e)+"</div></div>",c.queue.slots.length<1&&(b+='<div class="core-item without-hover">No items in queue at this moment.</div>'),localStorage.setItem("SabnzbdQueueHTML",b),serviceData.SAB.queue.HTML=b,localStorage.setItem("SabnzbdStatusHTML",a),serviceData.SAB.queue.downloadStatus=a}}function sabhHTML(){if(serviceData.SAB.history.JSON){var a=serviceData.SAB.history.JSON,b="<h2>History</h2>";a.history.slots.forEach(function(a){b+='<div class="core-item sab-item-container"><div class="sab-item-name">'+htmlEncode(a.name)+'</div><div class="core-item-icon"></div></div><div class="sabh-collapse core-collapse"><div class="sabh-collapse-status">',b+=""===a.fail_message?htmlEncode(a.status):htmlEncode(a.fail_message),b+='</div><div class="sabh-collapse-buttons"><div class="icon-button remove-icon sabh-remove-icon waves-effect" data-id='+a.nzo_id+"></div></div></div>"}),a.history.slots.length<1&&(b+='<div class="core-item without-hover">No items in history at this moment.</div>'),localStorage.setItem("SabnzbdHistoryHTML",b),serviceData.SAB.history.HTML=b}}