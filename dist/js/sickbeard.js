"use strict";function sbShowData(){document.querySelector("#sickbeard .sb-missed").innerHTML="",document.querySelector("#sickbeard .sb-today").innerHTML="",document.querySelector("#sickbeard .sb-soon").innerHTML="",document.querySelector("#sickbeard .sb-later").innerHTML="";serviceData.SB.apiUrl;checkError("sickbeard","Sickbeard_error"),serviceData.SB.MissedHTML&&(document.querySelector(".sb-missed").innerHTML=serviceData.SB.MissedHTML),serviceData.SB.TodayHTML&&(document.querySelector(".sb-today").innerHTML=serviceData.SB.TodayHTML),serviceData.SB.SoonHTML&&(document.querySelector(".sb-soon").innerHTML=serviceData.SB.SoonHTML),serviceData.SB.LaterHTML&&(document.querySelector(".sb-later").innerHTML=serviceData.SB.LaterHTML)}function searchEpisode(a){replaceContent(a,serviceData.spinner).then(function(){a.removeClass("search-icon"),a.removeClass("error-icon")});var b=serviceData.SB.apiUrl,c=b+"/?cmd=episode.search&tvdbid="+a.data("tvdbid")+"&season="+a.data("season")+"&episode="+a.data("episode");ajax("GET",c).then(function(b){replaceContent(a,"").then(function(){"failure"==b.result?(a.classList.add("error-icon"),a.setAttribute("title",b.message)):a.classList.add("done-icon")})},function(b){replaceContent(a,"").then(function(){a.classList.add("error-icon"),a.setAttribute("title","There was an error")})})}function markEpisode(a){replaceContent(a,serviceData.spinner).then(function(){a.removeClass("search-icon"),a.removeClass("error-icon")});var b=serviceData.SB.apiUrl,c=b+"/?cmd=episode.setstatus&tvdbid="+a.data("tvdbid")+"&season="+a.data("season")+"&episode="+a.data("episode")+"&status=skipped";ajax("GET",c).then(function(b){replaceContent(a,"").then(function(){"failure"==b.result?(a.setAttribute("class","icon-button error-icon sb-mark-episode waves-effect"),a.setAttribute("title",b.message)):a.setAttribute("class","icon-button done-all-icon sb-mark-episode waves-effect")})},function(b){replaceContent(a,"").then(function(){a.classList.add("error-icon"),a.setAttribute("title","There was an error")})})}serviceDataRefreshDone.then(function(){serviceData.SB.status&&document.querySelector("#sickbeard .panel-header .panel-header-foreground .bottom a").attr("href",serviceData.SB.url)}),document.querySelector("html").addEventListener("click",function(a){a.target.classList.contains("sb-search-episode")&&searchEpisode($(this)),a.target.classList.contains("sb-mark-episode")&&markEpisode($(this))});