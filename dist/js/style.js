function sortServices(a,b){var c=localStorage.getItem("serviceOrder").split(",");$.each(c,function(c,d){serviceHTML=a.find("[data-service-id="+d+"]"),a.append(serviceHTML),serviceBottom=b.find("[data-service-id="+d+"]"),b.append(serviceBottom)})}function errorChange(a){serviceName=a.key.replace("_error","").toLowerCase(),newValue=a.newValue,"true"==newValue?$("#"+serviceName+" .error").slideDown("slow"):"false"==newValue&&$("#"+serviceName+" .error").slideUp("slow")}$.when(serviceDataRefreshDone,$.ready,$(document).ready,$(window).load).done(function(){localStorage.getItem("serviceOrder")&&sortServices($(".panel-container"),$(".bottom-bar-container"));var a=0;$.each(serviceData,function(b,c){serviceStatus=c.status,serviceId="#"+c.containerId,serviceInfo="."+c.containerId+"-info",console.log(c.containerId,serviceStatus),serviceStatus&&(window[c.feFunctionName](),a+=c.panelWidth||400,$(serviceId+", "+serviceInfo).width(c.panelWidth),$(serviceId+", "+serviceInfo).show())}),$("body").width(a),$(".bottom-bar-container").width(a),$("img").attr("draggable",!1),$(".settings-button, .error-settings-button").click(function(){chrome.tabs.create({url:chrome.extension.getURL("options.html")})}),$(".error-retry-button").click(function(){var a=$(this).closest(".panel-content").prev(".panel-header").find(".refresh-button");a.click()}),$(".open-all").click(function(){var a=$(this).parent(".bottom-bar-part").data("service-id"),b=$(".panel[data-service-id="+a+"] .service-link");$.each(b,function(a,b){var c=$(b).attr("href");chrome.history.getVisits({url:c},function(a){console.log(c,a),0===a.length&&window.open(c)})})}),$(window).bind("storage",function(a){var b={CalendarHTML:calenderShowEvents,GmailReadHTML:GmailShowData,GmailUnreadHTML:GmailShowData,FacebookHTML:fbShowData,CouchpotatoSnatchedHTML:cpShowData,CouchpotatoWantedHTML:cpShowData,SickbeardMissedHTML:sbShowData,SickbeardTodayHTML:sbShowData,SickbeardSoonHTML:sbShowData,SickbeardLaterHTML:sbShowData,SabnzbdStatusHTML:sabShowData,SabnzbdQueueHTML:sabShowData,SabnzbdHistoryHTML:sabShowData,DesignernewsHTML:dnShowData,HackernewsHTML:hnShowData,GithubHTML:ghShowData,ProductHuntHTML:phShowData,DribbbleHTML:drShowData};-1!=a.originalEvent.key.indexOf("_error")&&errorChange(a.originalEvent),b[a.originalEvent.key]&&(currentTabs=chrome.extension.getViews({type:"tab"}),console.log(a.originalEvent.key),chrome.runtime.getBackgroundPage(function(c){c.refreshServiceData(),$.when(c.serviceDataRefreshDone).then(function(){$.each(currentTabs,function(c,d){d.refreshServiceData(),$.when(d.serviceDataRefreshDone).then(function(){storageFunction=b[a.originalEvent.key],d.storageFunction&&d.storageFunction()})})})}))})});