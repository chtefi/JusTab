function triggerStorageFunction(a,b,c){storageFunction=b[a],c.storageFunction&&c.storageFunction()}function findHistory(a){var b=$(a).attr("href");chrome.history.getVisits({url:b},function(a){0===a.length&&window.open(b)})}function showActiveServices(){{var a,b,c,d=0;Object.keys(serviceData)}for(var e in serviceData)a=serviceData[e].status,b="#"+serviceData[e].containerId,c="."+serviceData[e].containerId+"-info",console.log(serviceData[e].containerId,a),a&&(window[serviceData[e].feFunctionName](),d+=serviceData[e].panelWidth||400,$(b+", "+c).width(serviceData[e].panelWidth),$(b+", "+c).show());resizeBody(d)}function resizeBody(a){$("body").width(a),$(".bottom-bar-container").width(a)}function sortServices(a,b){var c=localStorage.getItem("serviceOrder").split(",");for(i=0;i<c.length;i++)serviceHTML=a.find("[data-service-id="+c[i]+"]"),a.append(serviceHTML),serviceBottom=b.find("[data-service-id="+c[i]+"]"),b.append(serviceBottom)}function errorChange(a){serviceName=a.key.replace("_error","").toLowerCase(),newValue=a.newValue,"true"==newValue?$("#"+serviceName+" .error").slideDown("slow"):"false"==newValue&&$("#"+serviceName+" .error").slideUp("slow")}$.when(serviceDataRefreshDone,$(document).ready).done(function(){localStorage.getItem("serviceOrder")&&sortServices($(".panel-container"),$(".bottom-bar-container")),showActiveServices(),$("img").attr("draggable",!1),$(".settings-button").click(function(){chrome.tabs.create({url:chrome.extension.getURL("options.html")})}),$(".error-settings-button").click(function(){chrome.tabs.create({url:chrome.extension.getURL("options.html")+"#"+$(this).parents(".panel").attr("id")})}),$(".error-retry-button").click(function(){var a=$(this).closest(".panel-content").prev(".panel-header").find(".refresh-button");a.click()}),$(".open-all").click(function(){var a=$(this).parent(".bottom-bar-part").data("service-id"),b=$(".panel[data-service-id="+a+"] .service-link");for(i=0;i<b.length;i++)findHistory(b[i])}),$(window).bind("storage",function(a){var b={CalendarHTML:calenderShowEvents,GmailReadHTML:GmailShowData,GmailUnreadHTML:GmailShowData,FacebookHTML:fbShowData,CouchpotatoSnatchedHTML:cpShowData,CouchpotatoWantedHTML:cpShowData,SickbeardMissedHTML:sbShowData,SickbeardTodayHTML:sbShowData,SickbeardSoonHTML:sbShowData,SickbeardLaterHTML:sbShowData,SabnzbdStatusHTML:sabShowData,SabnzbdQueueHTML:sabShowData,SabnzbdHistoryHTML:sabShowData,DesignernewsHTML:dnShowData,HackernewsHTML:hnShowData,GithubHTML:ghShowData,ProductHuntHTML:phShowData,DribbbleHTML:drShowData,RedditHTML:rdShowData,NzbgetQueueHTML:ngShowData,NzbgetHistoryHTML:ngShowData,SonarrHTML:soShowData};changedStorageKey=a.originalEvent.key,-1!=changedStorageKey.indexOf("_error")&&errorChange(a.originalEvent),b[changedStorageKey]&&(currentTabs=chrome.extension.getViews({type:"tab"}),console.log(changedStorageKey),chrome.runtime.getBackgroundPage(function(a){a.refreshServiceData(),$.when(a.serviceDataRefreshDone).then(function(){for(i=0;i<currentTabs.length;i++)currentTabs[i].refreshServiceData(),$.when(currentTabs[i].serviceDataRefreshDone).then(triggerStorageFunction(changedStorageKey,b,currentTabs[i]))})}))})});