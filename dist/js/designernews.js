function dnShowData(){$(".dn-links").empty();var a=serviceData.DN.error;"true"==a&&$("#designernews .error").slideDown("slow"),"false"==a&&$("#designernews .error").slideUp("slow"),$(".dn-links").html(serviceData.DN.HTML)}function dnUpvote(a){var b="https://api-news.layervault.com/api/v2/upvotes",c=serviceData.DN.me.id.toString(),d=$(a).data("id").toString();$.ajax({url:b,type:"POST",headers:{Authorization:serviceData.DN.token,"Content-Type":"application/vnd.api+json"},data:'{ "upvotes": { "links": { "story": '+d+', "user": '+c+" } } }"}).done(function(){upvotes=serviceData.DN.upvotes,upvotes+=","+d,localStorage.setItem("DesignernewsUpvotes",upvotes),serviceData.DN.upvotes=upvotes,chrome.runtime.getBackgroundPage(function(a){a.serviceData.DN.upvotes=upvotes}),$(a).addClass("voted")}).fail(function(a,b,c){console.log(a,b,c)})}$.when(serviceDataRefreshDone).done(function(){serviceData.DN.status&&($(".refresh-dn").click(function(){$("#designernews .error:visible").slideUp(400),$(".refresh-dn").fadeOut(400,function(){$(this).html(serviceData.spinner),$(this).fadeIn(400,function(){chrome.runtime.getBackgroundPage(function(a){a.getDesignerNewsData(function(){$(".refresh-dn").fadeOut(400,function(){$(this).html('<img src="img/icons/refresh.svg" alt="Refresh Designernews" draggable=false>'),$(this).fadeIn(400)})})})})})}),$("html").on("click",".dn-upvote",function(){dnUpvote($(this))}))});